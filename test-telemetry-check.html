<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏</title>
  <style>
    body { font-family: monospace; background: #1a1a1a; color: #00ff00; padding: 20px; }
    .log { border: 1px solid #00ff00; padding: 10px; margin: 10px 0; max-height: 400px; overflow-y: auto; }
    .error { color: #ff0000; }
    .success { color: #00ff00; }
    button { padding: 10px; margin: 5px; background: #333; border: 1px solid #00ff00; color: #00ff00; cursor: pointer; }
    h2 { border-bottom: 1px solid #00ff00; }
  </style>
</head>
<body>
  <h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ SuslovPA</h1>
  
  <h2>1. Vercel Deploy</h2>
  <button onclick="testVercel()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Vercel</button>
  <div id="vercel-log" class="log"></div>
  
  <h2>2. GitHub Pages</h2>
  <button onclick="testGitHub()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å GitHub Pages</button>
  <div id="github-log" class="log"></div>
  
  <h2>3. –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏</h2>
  <button onclick="openDevTools()">–û—Ç–∫—Ä—ã—Ç—å DevTools (F12)</button>
  <div id="local-log" class="log"></div>

  <script>
    async function testVercel() {
      const log = document.getElementById('vercel-log');
      log.innerHTML = '‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º Vercel –≤–µ—Ä—Å–∏—é...';
      
      try {
        const response = await fetch('https://suslovpa.vercel.app/noninput.html');
        if (!response.ok) {
          log.innerHTML = `<span class="error">‚ùå HTTP ${response.status}</span>`;
          return;
        }
        
        const html = await response.text();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
        const checks = [
          { name: 'window.__setT', pattern: /window\.__setT\s*=/ },
          { name: 'window.__setW', pattern: /window\.__setW\s*=/ },
          { name: 'render(out)', pattern: /function\s+render\s*\(\s*out\s*\)/ },
          { name: 'loop()', pattern: /function\s+loop\s*\(\s*\)/ },
          { name: '$( function', pattern: /const\s+\$\s*=\s*\(\s*id\s*\)\s*=>/ },
          { name: 'window.__legacyEngine', pattern: /window\.__legacyEngine/ },
        ];
        
        let html_output = '<span class="success">‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ\n\n</span>';
        for (const check of checks) {
          const found = check.pattern.test(html);
          html_output += `${found ? '‚úÖ' : '‚ùå'} ${check.name}\n`;
        }
        
        log.innerHTML = html_output.replace(/\n/g, '<br>');
      } catch (e) {
        log.innerHTML = `<span class="error">‚ùå –û—à–∏–±–∫–∞: ${e.message}</span>`;
      }
    }
    
    async function testGitHub() {
      const log = document.getElementById('github-log');
      log.innerHTML = '‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º GitHub Pages –≤–µ—Ä—Å–∏—é...';
      
      try {
        const response = await fetch('https://montagnikrea-source.github.io/SuslovPA/noninput.html');
        if (!response.ok) {
          log.innerHTML = `<span class="error">‚ùå HTTP ${response.status}</span>`;
          return;
        }
        
        const html = await response.text();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
        const checks = [
          { name: 'window.__setT', pattern: /window\.__setT\s*=/ },
          { name: 'window.__setW', pattern: /window\.__setW\s*=/ },
          { name: 'render(out)', pattern: /function\s+render\s*\(\s*out\s*\)/ },
          { name: 'loop()', pattern: /function\s+loop\s*\(\s*\)/ },
          { name: '$( function', pattern: /const\s+\$\s*=\s*\(\s*id\s*\)\s*=>/ },
          { name: 'window.__legacyEngine', pattern: /window\.__legacyEngine/ },
        ];
        
        let html_output = '<span class="success">‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ\n\n</span>';
        for (const check of checks) {
          const found = check.pattern.test(html);
          html_output += `${found ? '‚úÖ' : '‚ùå'} ${check.name}\n`;
        }
        
        log.innerHTML = html_output.replace(/\n/g, '<br>');
      } catch (e) {
        log.innerHTML = `<span class="error">‚ùå –û—à–∏–±–∫–∞: ${e.message}</span>`;
      }
    }
    
    function openDevTools() {
      const log = document.getElementById('local-log');
      log.innerHTML = `
        <span class="success">‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:\n\n</span>
        1. –ù–∞–∂–º–∏—Ç–µ <strong>F12</strong> –∏–ª–∏ <strong>Ctrl+Shift+I</strong>\n
        2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <strong>Console</strong>\n
        3. –ò—â–∏—Ç–µ –ª–æ–≥–∏ –≤–∏–¥–∞:\n
           - <strong>[RENDER n]</strong> - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏\n
           - <strong>[SET-T]</strong> - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞\n
           - <strong>[SET-W]</strong> - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ñ–≤\n
           - <strong>[LOOP n]</strong> - —Ü–∏–∫–ª –∞–ª–≥–æ—Ä–∏—Ç–º–∞\n\n
        4. –ï—Å–ª–∏ –ª–æ–≥–æ–≤ –Ω–µ—Ç - –∑–Ω–∞—á–∏—Ç render() –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ setT/setW –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
      `.replace(/\n/g, '<br>');
    }
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', () => {
      console.log('üìä –¢–µ—Å—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ.');
    });
  </script>
</body>
</html>
