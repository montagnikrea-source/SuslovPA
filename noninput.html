<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Frequency Scanner ‚Äî Neuro Homeostasis J‚Üí0</title>
  <meta name="google-adsense-account" content="ca-pub-1128500581050725">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1128500581050725" crossorigin="anonymous"></script>
  <style>
    :root { --bg: #f3f5f7; --panel: #fff; --text: #1a1a1a; --border: #e0e0e0; --primary: #0a7cff; }
    html[data-theme="dark"] { --bg: #0d1117; --panel: #1a1f26; --text: #e6edf3; --border: #30363d; --primary: #58a6ff; }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { background: var(--bg); color: var(--text); font: 14px/1.45 system-ui, Segoe UI, Arial; transition: all 0.3s; }
    .header { background: var(--panel); border-bottom: 1px solid var(--border); padding: 12px 24px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,.07); position: sticky; top: 0; z-index: 1000; }
    .theme-toggle { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 6px 12px; cursor: pointer; display: flex; gap: 6px; align-items: center; color: var(--text); }
    .theme-toggle:hover { background: var(--panel); border-color: var(--primary); }
    .time { font-size: 13px; color: var(--text); opacity: 0.7; }
    .main { display: flex; gap: 24px; max-width: 1400px; margin: 24px auto; padding: 24px; }
    .content { flex: 1; padding: 24px; background: var(--panel); border-radius: 16px; box-shadow: 0 2px 22px rgba(0,0,0,.07); border: 1px solid var(--border); }
    .chat { width: 350px; background: var(--panel); border-radius: 16px; box-shadow: 0 2px 22px rgba(0,0,0,.07); padding: 20px; border: 1px solid var(--border); height: fit-content; position: sticky; top: 80px; }
    h1 { font-size: 24px; margin-bottom: 10px; }
    h3 { margin-bottom: 12px; }
    #loading { margin: 6px 0 12px; }
    #loading .bg { height: 18px; border-radius: 8px; background: var(--border); overflow: hidden; }
    #fill { height: 100%; background: var(--primary); width: 0%; }
    .bar { height: 18px; border-radius: 8px; background: var(--border); margin: 10px 0; overflow: hidden; }
    .f { background: linear-gradient(90deg, var(--primary) 60%, #69b7ff); height: 100%; width: 0%; }
    .i { background: linear-gradient(90deg, #18b56c 60%, #9ef0c5); height: 100%; width: 0%; }
    .c { background: linear-gradient(90deg, #ff9800 60%, #ffd699); height: 100%; width: 0%; }
    .lbl { margin: 10px 0 6px; color: var(--text); opacity: 0.8; font-weight: 500; }
    #info { margin-top: 14px; font-family: monospace; white-space: pre-wrap; color: var(--text); background: var(--bg); padding: 12px; border-radius: 8px; border: 1px solid var(--border); font-size: 12px; }
    .messages { height: 300px; overflow-y: auto; border: 1px solid var(--border); border-radius: 8px; padding: 12px; margin: 10px 0; background: var(--bg); }
    .message { margin-bottom: 12px; padding: 8px 12px; border-radius: 12px; max-width: 85%; word-wrap: break-word; }
    .message.user { background: var(--primary); color: white; margin-left: auto; }
    .message.other { background: var(--border); color: var(--text); }
    .message.system { font-style: italic; text-align: center; margin: 5px auto; max-width: 95%; }
    .meta { font-size: 11px; opacity: 0.7; margin-top: 4px; }
    .chat-input { display: flex; gap: 8px; }
    input { flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: 6px; font-size: 14px; background: var(--bg); color: var(--text); }
    button { padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; }
    button:hover { opacity: 0.9; }
    .online { background: linear-gradient(135deg, #d4edda, #e8f5e8); border: 1px solid #c3e6cb; color: #155724; padding: 8px; border-radius: 6px; font-size: 12px; margin-bottom: 8px; text-align: center; }
    @media (max-width: 1200px) { .main { flex-direction: column; } .chat { width: 100%; position: relative; top: 0; } }
  </style>
</head>
<body>

<div class="header">
  <h2>üí¨ Frequency Scanner</h2>
  <div style="display: flex; gap: 12px; align-items: center;">
    <div class="time" id="time">‚è∞ 00:00:00</div>
    <button class="theme-toggle" id="theme-btn">
      <span id="icon">üåô</span>
      <span id="name">–¢–µ–º–Ω–∞—è</span>
    </button>
  </div>
</div>

<div class="main">
  <div class="content">
    <h1>Frequency Scanner ‚Äî Neuro Homeostasis J‚Üí0</h1>
    
    <div id="loading"><div id="fill"></div></div>
    <p id="status">–ü–ª–∞–≤–Ω–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ‚Ä¶</p>
    
    <div class="row">
      <div class="lbl">–ß–∞—Å—Ç–æ—Ç–∞ (–ì—Ü): <span id="freq">0</span></div>
      <div class="bar"><div id="freqBar" class="f"></div></div>
      
      <div class="lbl">–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (%): <span id="inertia">0</span></div>
      <div class="bar"><div id="inertiaBar" class="i"></div></div>
      
      <div class="lbl">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: <span id="conf">0</span></div>
      <div class="bar"><div id="confBar" class="c"></div></div>
    </div>
    
    <div id="info"></div>
  </div>
  
  <div class="chat">
    <h3>üí¨ –ß–∞—Ç</h3>
    <div class="online">üë• –û–Ω–ª–∞–π–Ω: <span id="online">1</span></div>
    
    <input type="text" id="user" placeholder="–ò–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
    <div class="messages" id="msgs">
      <div class="message system"><div>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üéâ</div><div class="meta">–°–∏—Å—Ç–µ–º–∞ ‚Ä¢ —Å–µ–π—á–∞—Å</div></div>
    </div>
    
    <div class="chat-input">
      <input type="text" id="msg" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
      <button onclick="send()">üì§</button>
    </div>
  </div>
</div>

<script>
// === –¢–ï–ú–ê ===
function initTheme() {
  const h = new Date().getHours();
  const dark = h >= 21 || h < 6;
  const saved = localStorage.getItem('theme');
  const theme = saved || (dark ? 'dark' : 'light');
  
  document.documentElement.setAttribute('data-theme', theme);
  updateThemeUI(theme);
  
  document.getElementById('theme-btn').onclick = () => {
    const next = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    updateThemeUI(next);
  };
  
  setInterval(() => {
    const now = new Date();
    document.getElementById('time').textContent = `‚è∞ ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
  }, 1000);
}

function updateThemeUI(t) {
  document.getElementById('icon').textContent = t === 'dark' ? '‚òÄÔ∏è' : 'üåô';
  document.getElementById('name').textContent = t === 'dark' ? '–°–≤–µ—Ç–ª–∞—è' : '–¢–µ–º–Ω–∞—è';
}

// === –ß–ê–¢ ===
const msgs = JSON.parse(localStorage.getItem('msgs') || '[]');

function render() {
  const c = document.getElementById('msgs');
  c.innerHTML = '<div class="message system"><div>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üéâ</div><div class="meta">–°–∏—Å—Ç–µ–º–∞ ‚Ä¢ —Å–µ–π—á–∞—Å</div></div>';
  msgs.slice(-20).forEach(m => {
    const d = document.createElement('div');
    d.className = 'message user';
    d.innerHTML = `<div>${m.t}</div><div class="meta">${m.u} ‚Ä¢ ${m.tm}</div>`;
    c.appendChild(d);
  });
  c.scrollTop = c.scrollHeight;
  document.getElementById('online').textContent = Math.max(1, msgs.length);
}

window.send = () => {
  const m = document.getElementById('msg').value;
  const u = document.getElementById('user').value || '–ê–Ω–æ–Ω';
  if (m) {
    const t = new Date().toLocaleTimeString('ru', {hour:'2-digit', minute:'2-digit'});
    msgs.push({t: m, u, tm: t});
    localStorage.setItem('msgs', JSON.stringify(msgs.slice(-50)));
    render();
    document.getElementById('msg').value = '';
  }
};

document.getElementById('msg').addEventListener('keypress', e => {
  if (e.key === 'Enter') send();
});

// === FREQUENCY SCANNER ===
let tick = 0;
setInterval(() => {
  const f = 5 + 45 * Math.sin(tick * 0.01) + Math.random() * 2;
  const i = Math.max(0, Math.min(1, 0.5 + 0.4 * Math.sin(tick * 0.005)));
  const c = Math.max(0, Math.min(1, 0.6 + 0.3 * Math.sin(tick * 0.008)));
  
  document.getElementById('freq').textContent = f.toFixed(2);
  document.getElementById('freqBar').style.width = (f / 50 * 100) + '%';
  document.getElementById('inertia').textContent = (i * 100).toFixed(0);
  document.getElementById('inertiaBar').style.width = (i * 100) + '%';
  document.getElementById('conf').textContent = c.toFixed(2);
  document.getElementById('confBar').style.width = (c * 100) + '%';
  document.getElementById('info').textContent = `–°–æ—Å—Ç–æ—è–Ω–∏–µ: –ê–ù–ê–õ–ò–ó\n–ß–∞—Å—Ç–æ—Ç–∞: ${f.toFixed(3)} –ì—Ü\n–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: ${(i*100).toFixed(0)}%\n–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: ${c.toFixed(2)}\nfs: 500 –ì—Ü\nNeuro-homeostasis J‚Üí0`;
  document.getElementById('fill').style.width = Math.min(100, tick * 0.5) + '%';
  tick++;
}, 160);

initTheme();
render();
</script>

</body>
</html>
